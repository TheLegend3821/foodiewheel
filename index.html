<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <title>Foodieee Wheel</title>

  <!-- Libraries -->
  <!-- NEW â€“ TweenMax 2.1.3 (fully compatible with Winwheel) -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/2.1.3/TweenMax.min.js"></script>
  <script src="https://cdn.jsdelivr.net/gh/zarocknz/javascript-winwheel@2.8.0/Winwheel.min.js"></script>

  <style>
    body{font-family:sans-serif;text-align:center;margin:40px}
    #menuSelect{margin-bottom:10px;font-size:1rem}
     /* fixed, downward-facing triangle */
/* fixed, DOWN-facing triangle */
#pointer{
  position:absolute;
  /* Glue the base of the triangle to the top edge of the canvas */
  top:0;                                  /* align with canvas topâ€¦           */
  left:50%;
  transform:translateX(-50%) translateY(-100%); /* â€¦then lift it one arrow height */

  /* Triangle made of borders */
  width:0; height:0;
  border-left:18px solid transparent;
  border-right:18px solid transparent;
  border-bottom:28px solid #e74c3c;  /* colour â†’ points DOWN */
  z-index:10;                        /* always above the canvas */
}

  </style>
</head>
<body>
  <h2>Spin the Foodieee Wheel</h2>

  <select id="menuSelect">
    <option value="cheap">Cheap</option>
    <option value="expensive">Expensive</option>
    <option value="premium">Premium</option>
  </select>

<div id="wheelWrap" style="position:relative; display:inline-block;">
  <div id="pointer"></div>      <!-- arrow -->
  <canvas id="canvas" width="450" height="450"></canvas>
</div>

<button onclick="theWheel.startAnimation();">Spin!</button>
<p id="result"></p>


<script>
const data = {
  cheap:     ['banh mi','economic rice','chicken rice','mcd'],
  expensive: ['ramen','poke bowl','gourmet burger'],
  premium:   ['omakase','dry-aged steak','lobster roll']
};

const segmentColors = [
  '#ff7675','#74b9ff','#ffeaa7','#55efc4',
  '#fd79a8','#a29bfe','#fab1a0','#81ecec'
];

let theWheel;
makeWheel('cheap');                          // A  â† default wheel

document.getElementById('menuSelect')        // B
        .addEventListener('change', e => makeWheel(e.target.value));

function makeWheel(tier){                    // C  â† parameter restored
  if (theWheel) theWheel.stopAnimation(false);

  theWheel = new Winwheel({
    canvasId: 'canvas',
    numSegments: data[tier].length,
    segments: data[tier].map((label, i) => ({
      text: label,
      fillStyle: segmentColors[i % segmentColors.length]
    })),
    animation: {
      type: 'spinToStop',
      spins: 5,
      callbackFinished: seg =>
        document.getElementById('result').textContent =
          'ðŸŽ‰ You got: ' + seg.text
    }
  });

  theWheel.draw();
}
</script>

</body>
</html>
